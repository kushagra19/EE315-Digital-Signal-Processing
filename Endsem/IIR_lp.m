function y = doFilter(x)
%DOFILTER Filters input x and returns output y.

% MATLAB Code
% Generated by MATLAB(R) 9.9 and DSP System Toolbox 9.11.
% Generated on: 07-Nov-2021 22:09:29

%#codegen

% To generate C/C++ code from this function use the codegen command.
% Type 'help codegen' for more information.

persistent Hd;

if isempty(Hd)
    
    % The following code was used to design the filter coefficients:
    %
    % Fpass = 7500;   % Passband Frequency
    % Fstop = 8000;   % Stopband Frequency
    % Apass = 1;      % Passband Ripple (dB)
    % Astop = 80;     % Stopband Attenuation (dB)
    % Fs    = 44100;  % Sampling Frequency
    %
    % h = fdesign.lowpass('fp,fst,ap,ast', Fpass, Fstop, Apass, Astop, Fs);
    %
    % Hd = design(h, 'butter', ...
    %     'MatchExactly', 'stopband', ...
    %     'SystemObject', true);
    
    Hd = dsp.BiquadFilter( ...
        'Structure', 'Direct form II', ...
        'SOSMatrix', [1 2 1 1 -0.943757769489729 0.977980159263833; 1 2 1 1 ...
        -0.923430502509904 0.935377139635298; 1 2 1 1 -0.903978769122515 ...
        0.894609112131432; 1 2 1 1 -0.885358944579292 0.855584645572198; 1 2 1 1 ...
        -0.867530083690942 0.818217924746685; 1 2 1 1 -0.850453738306307 ...
        0.782428367875745; 1 2 1 1 -0.834093788316504 0.748140272421044; 1 2 1 1 ...
        -0.818416285160633 0.715282487095605; 1 2 1 1 -0.803389306882066 ...
        0.683788108082689; 1 2 1 1 -0.788982823853255 0.653594197614364; 1 2 1 1 ...
        -0.775168574352371 0.624641523198085; 1 2 1 1 -0.761919949236526 ...
        0.596874315908407; 1 2 1 1 -0.749211885014023 0.570240046281834; 1 2 1 1 ...
        -0.737020764671847 0.544689216465557; 1 2 1 1 -0.725324325664777 ...
        0.520175167375892; 1 2 1 1 -0.714101574518973 0.496653899719724; 1 2 1 1 ...
        -0.703332707546058 0.474083907822657; 1 2 1 1 -0.69299903720356 ...
        0.45242602529112; 1 2 1 1 -0.683082923674435 0.431643281612917; 1 2 1 1 ...
        -0.673567711272362 0.411700768871903; 1 2 1 1 -0.664437669310838 ...
        0.392565517818122; 1 2 1 1 -0.655677937102904 0.374206382595187; 1 2 1 1 ...
        -0.647274472784926 0.356593933482286; 1 2 1 1 -0.63921400568221 ...
        0.339700357059397; 1 2 1 1 -0.63148399195673 0.323499363251312; 1 2 1 1 ...
        -0.624072573297839 0.307966098749329; 1 2 1 1 -0.616968538435827 ...
        0.29307706634923; 1 2 1 1 -0.610161287275611 0.278810049780652; 1 2 1 1 ...
        -0.60364079746385 0.265144043636599; 1 2 1 1 -0.597397593217523 ...
        0.252059188042622; 1 2 1 1 -0.591422716255514 0.239536707733627; 1 2 1 1 ...
        -0.58570769868722 0.227558855232301; 1 2 1 1 -0.58024453772363 ...
        0.216108857847178; 1 2 1 1 -0.575025672086838 0.205170868230394; 1 2 1 1 ...
        -0.570043960003686 0.194729918255521; 1 2 1 1 -0.565292658678106 ...
        0.184771875994568; 1 2 1 1 -0.560765405144994 0.175283405590457; 1 2 1 1 ...
        -0.556456198416004 0.166251929837185; 1 2 1 1 -0.552359382834651 ...
        0.157665595294519; 1 2 1 1 -0.548469632564557 0.149513239777598; 1 2 1 1 ...
        -0.54478193714065 0.141784362074329; 1 2 1 1 -0.541291588018618 ...
        0.134469093754984; 1 2 1 1 -0.537994166063037 0.127558172949123; 1 2 1 1 ...
        -0.534885529919314 0.121042919974858; 1 2 1 1 -0.53196180521896 ...
        0.114915214714664; 1 2 1 1 -0.529219374571785 0.109167475640471; 1 2 1 1 ...
        -0.526654868302403 0.103792640398705; 1 2 1 1 -0.524265155891938 ...
        0.0987841478733379; 1 2 1 1 -0.522047338089117 0.0941359216518854; 1 2 1 ...
        1 -0.519998739658036 0.0898423548257613; 1 2 1 1 -0.518116902732718 ...
        0.0858982960623969; 1 2 1 1 -0.516399580751329 0.0822990368922261; 1 2 1 ...
        1 -0.514844732945426 0.0790403001589512; 1 2 1 1 -0.513450519362041 ...
        0.0761182295865378; 1 2 1 1 -0.51221529639864 0.0735293804211471; 1 2 1 ...
        1 -0.511137612833194 0.0712707111107278; 1 2 1 1 -0.510216206333616 ...
        0.0693395759893001; 1 2 1 1 -0.509450000432799 0.0677337189370743; 1 2 1 ...
        1 -0.508838101957375 0.0664512679915029; 1 2 1 1 -0.508379798900136 ...
        0.0654907308881762; 1 2 1 1 -0.508074558727809 0.0648509915141628; 1 2 1 ...
        1 -0.507922027117598 0.0645313072599916], ...
        'ScaleValues', [0.258555597443526; 0.252986659281349; ...
        0.247657585752229; 0.242556425248227; 0.237671960263936; ...
        0.232993657392359; 0.228511621026135; 0.224216550483743; ...
        0.220099700300156; 0.216152843440277; 0.212368237211429; ...
        0.20873859166797; 0.205257040316953; 0.201917112948428; ...
        0.198712710427779; 0.195638081300188; 0.19268780006915; ...
        0.18985674702189; 0.187140089484621; 0.184533264399885; ...
        0.182031962126821; 0.179632111373071; 0.17732986517434; ...
        0.175121587844297; 0.173003842823645; 0.170973381362873; ...
        0.169027131978351; 0.16716219062626; 0.165375811543187; ...
        0.163665398706275; 0.162028497869528; 0.16046278913627; ...
        0.158966080030887; 0.157536299035889; 0.156171489562959; ...
        0.154869804329116; 0.153629500111366; 0.152448932855295; ...
        0.151326553114967; 0.15026090180326; 0.14925060623342; ...
        0.148294376434092; 0.147391001721522; 0.146539347513886; ...
        0.145738352373926; 0.144987025267172; 0.144284443024075; ...
        0.14362974799535; 0.143022145890692; 0.142460903791931; ...
        0.14194534833242; 0.141474864035224; 0.141048891803381; ...
        0.140666927556124; 0.140328521005627; 0.140033274569383; ...
        0.139780842413921; 0.139570929626069; 0.139403291508532; ...
        0.13927773299701; 0.139194108196588; 0.139152320035598; 1]);
end

s = double(x);
y = step(Hd,s);

